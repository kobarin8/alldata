package com.internousdev.ecsite.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.util.Map;

import org.apache.struts2.interceptor.SessionAware;

import com.internousdev.ecsite.util.DBConnector;
import com.opensymphony.xwork2.ActionSupport;

public class DeleteItemDAO extends ActionSupport implements SessionAware{

	public Map<String,Object> session;

	private DBConnector dbConnector = new DBConnector();															//
	private Connection connection = dbConnector.getConnection();												//


	public void ItemDelete() throws SQLException {

		String sql = "DELETE FROM item_info_transaction WHERE item_name = ? AND item_price = ? AND item_stock = ?";

		PreparedStatement preparedStatement;																					//preparedStatementの変数化



		try {

			String name =session.get("ItemNameKey").toString();
			int price =session.get("ItemPriceKey").toString();
			int stock =session.get("ItemStockKey").toString();

			preparedStatement = connection.prepareStatement(sql);													//SQL文の実行。値の所得
			preparedStatement.setString(1, name);														//バインド変数のパラメーター設定
			preparedStatement.setint(2, price);																//バインド変数のパラメーター設定
			preparedStatement.setString(3, stock);																//バインド変数のパラメーター設定


		}

		catch (SQLException e) {e.printStackTrace();}																		//
		finally {connection.close();}																									//
}


	public Map<String, Object> getSession() {
		return session;
	}


	public void setSession(Map<String, Object> session) {
		this.session = session;
	}


}


